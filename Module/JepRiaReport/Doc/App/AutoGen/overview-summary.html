<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_77) on Mon Apr 24 13:51:37 MSK 2017 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Overview</title>
<meta name="date" content="2017-04-24">
<link rel="stylesheet" type="text/css" href="stylesheet.css" title="Style">
<script type="text/javascript" src="script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="Overview";
        }
    }
    catch(err) {
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li class="navBarCell1Rev">Overview</li>
<li>Package</li>
<li>Class</li>
<li><a href="overview-tree.html">Tree</a></li>
<li><a href="deprecated-list.html">Deprecated</a></li>
<li><a href="index-all.html">Index</a></li>
<li><a href="help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev</li>
<li>Next</li>
</ul>
<ul class="navList">
<li><a href="index.html?overview-summary.html" target="_top">Frames</a></li>
<li><a href="overview-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="header">
<div class="subTitle">
<div class="block">Пакет содержит средства поддержки работы с отчётами JasperReports на платформе JEP.<br/></div>
</div>
<p>See: <a href="#overview.description">Description</a></p>
</div>
<div class="contentContainer">
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Packages table, listing packages, and an explanation">
<caption><span>Packages</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Package</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="com/technology/jep/jepriareport/server/package-summary.html">com.technology.jep.jepriareport.server</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="com/technology/jep/jepriareport/server/large/package-summary.html">com.technology.jep.jepriareport.server.large</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="com/technology/jep/jepriareport/server/servlet/package-summary.html">com.technology.jep.jepriareport.server.servlet</a></td>
<td class="colLast">&nbsp;</td>
</tr>
</tbody>
</table>
</div>
<div class="contentContainer"><a name="overview.description">
<!--   -->
</a>
<div class="block">Пакет содержит средства поддержки работы с отчётами JasperReports на платформе JEP.<br/>

<h2>Содержание Description</h2>

<ul>
  <li><a href="#systemRequirements">Системные требования</a>
  <li><a href="#distr">Дистрибутивы</a>
  <li><a href="#install">Установка</a>
  <li><a href="#reports">Разработка отчётов с использованием JasperReports</a>
  <ul>
    <li><a href="#reportCreationSteps">Основные шаги разработки</a>
    <li><a href="#reportKinds">Виды отчётов</a>
  </ul>
  <li><a href="#featuresOfStrutsConfigCreation">Особенности конфигурирования struts-config.xml</a>
  <li><a href="#webxmlConfig">Особенности конфигурирования web.xml</a>
  <li><a href="#templatePlace">Размещение шаблонов отчётов</a>
  <li><a href="#largeReports">Поддержка &quot;больших отчётов&quot;</a>
  <li><a href="#iReport">Среда визуальной разработки шаблонов <i>iReport</i></a>
  <li><a href="#jrCompiler">Компилятор отчётов <i>JrCompiler</i></a>
  <li><a href="#literature">Литература</a>
  <li><a href="#error">Ошибки</a>
  <li><a href="#todo">Доработки</a>
</ul>

<h3><a name="systemRequirements">Системные требования</a></h3>
Для разработки отчётов <i>JasperReports</i> необходимо установить версии продуктов <i>JasperReports</i> и <i>iReport</i>, используемые в текущий момент (номера используемых версий необходимо уточнить у ответственных сотрудников). 
Продукт <i>JasperReports</i> содержит необходимые библиотеки для поддержки работы отчётов во время выполнения, а также исходный код и множество примеров.
Среда разработки <i>iReport</i>  используется для создания шаблонов отчётов в режиме WYSIWYG.

<h3><a name="distr">Дистрибутивы</a></h3>
Дистрибутивы, используемые для работы с системой JasperReports, находятся в директории <i>\\smskss1\install\!DT\JasperReports</i>.
Дистрибутивы библиотеки JasperReports представляют собой установочные архивы вида jasperreports-x.y.z-project.zip, где x.y.z – номер версии продукта.
Дистрибутивы среды разработки шаблонов отчётов iReport представляют собой установочные архивы вида iReport-nb- x.y.z.zip, где x.y.z – номер версии продукта.

<h3><a name="install">Установка продуктов</a></h3>
Оба продукта <i>JasperReports</i> и <i>iReport</i> устанавливаются простым копированием содержимого установочных архивов.

<h3><a name="reports">Разработка отчётов с использованием JasperReports</a></h3>
<h4><a name="reportCreationSteps">Основные шаги разработки</a></h3>
В общем случае разработка отчёта для прикладного модуля <i>Jep</i> состоит из следующих шагов:
<ol>
  <li>Разработка шаблона отчёта и, если необходимо, его подотчётов.
  <li>Создание на jsp кнопок инструментальной панели, инициирующих запрос на построение отчёта
  <li>Разработка класса (наследника <i>JepAction</i>), обрабатывающего запрос на построение отчёта. 
  <li>Подготовка скриптов сборки (setEnvironment.bat и make.bat) для создания и включения  в установочный архив модуля всего, что необходимо для работы с создаваемым отчётом.
</ol>
<h4><a name="reportKinds">Виды отчётов</a></h3>
JepReport поддерживает разработку 3-х основных видов отчётов:
<ul>
  <li>Несписочная форма (бланки, письма и т.п.)
  <li>Списочная форма
  <li>Списочная форма для <i>больших отчётов</i>.
<br>
Под &quot;большими отчётами&quot; в данном случае понимаются отчёты, требующие большого объёма вычислительных ресурсов,
главным образом, оперативной памяти сервера.
<br>
Для создания перечисленных видов отчётов используется методы класса <code><code>com.technology.jep.jepreport.JepReportManager</code></code>,
соответственно, для несписочных форм: <code><code>com.technology.jep.jepreport.JepReportManager#preparePrintForm(HttpServletRequest, JepReportParameters, String)</code></code>,
а для списочных - <code><code>com.technology.jep.jepreport.JepReportManager#prepareReport(HttpServletRequest, JepReportParameters, String, String)</code></code> и <code><code>com.technology.jep.jepreport.JepReportManager#prepareLargeReport(HttpServletRequest, JepReportParameters, String, String)</code></code>.
<p>
Методам, работающим со списочными формами отчётов необходим параметр, указывающий на источник данных.
Для обычных списочных форм источником являются объекты <code>SimpleViewObject</code> (и тогда параметром передаётся имя атрибута сессии,
хранящего такие объекты), а для больших отчётов - EJB, специально разработанные в прикладных модулях (и тогда параметром передаётся JNDI-имя
EJB-модуля, реализующего интерфейс <code>JepLargeReport</code>.
</ul>


<h3><a name="featuresOfStrutsConfigCreation">Особенности конфигурирования struts-config.xml</a></h3>
Ниже приведён пример определения тега &lt;forward&gt; для вызова сервлета, экспортирующего в формат PDF.
<pre>
...
&lt;action path="/welcomeOutput" type="com.technology.rfi.dswelcome.action.WelcomeOutputAction" name="welcomeForm" scope="session"&gt;
  ...
<b>  
  &lt;forward name="getDsSchedule" path="/WEB-INF/jsp/com/technology/rfi/dswelcome/welcome.jsp?postAction=window.open(&quot;/DSWelcome/servlets/pdf&quot;,&quot;_blank&quot;);"/&gt;
</b>  
  ...
&lt;/action&gt;
...
</pre>

<h3><a name="webxmlConfig">Особенности конфигурирования web.xml</a></h3>
Экспорт отчёта из внутреннего представления в различные форматы обеспечивается экспортирующими сервлетами.
Для форматов PDF, RTF, EXCEL, HTML и т. д. существуют сервлеты экспорта. По сервлетам экспорта есть информация в 
установке JasperReports (можно посмотреть примеры, состав библиотек и т.п.). Для формата HTML в составе <i>JepReport</i> разработан сервлет 
<code>com.technology.jep.jepreport.servlet.HtmlServlet</code>.
Ниже приведён пример фрагмента <i>web.xml</i>, в котором сконфигурирован сервлет экспорта в PDF.
<pre>
...
  &lt;servlet&gt;
  &lt;servlet-name&gt;PdfServlet&lt;/servlet-name&gt;
  &lt;servlet-class&gt;net.sf.jasperreports.j2ee.servlets.PdfServlet&lt;/servlet-class&gt;
  &lt;/servlet&gt;
...
  &lt;servlet-mapping&gt;
  &lt;servlet-name&gt;PdfServlet&lt;/servlet-name&gt;
  &lt;url-pattern&gt;/servlets/pdf&lt;/url-pattern&gt;
  &lt;/servlet-mapping&gt;
...
</pre>

<h3><a name="templatePlace">Размещение шаблонов отчётов</a></h3>
Во время выполнения шаблоны отчётов (и подотчётов) размещаются в ресурсной директории <i>%RESOURCE_HOME%\%MODULE_PACKAGE%\report</i>.

<h3><a name="largeReports">Поддержка &quot;больших отчётов&quot;</a></h3>
Для работы с большими отчётами в <i>JepReport</i> создан специальный источник данных,
<code>com.technology.jep.jepreport.large.JepLargeReportDataSource</code>, который на уровне EJB работает с курсором БД, выгружая
на уровень web порции данных. На уровне web, в свою очередь, используется режим виртуализации (размещения части данных отчёта на дисковой памяти),
поддерживаемый средствами <i>JasperReports</i>.

<h3><a name="iReport">Среда визуальной разработки шаблонов <i>iReport</i></a></h3>
Во многом позволяет избежать ручного кодирования jrxml-представления шаблонов отчётов, особенно полезен при выравнивании элементов отчёта,
выполнении предварительных просмотров, которые можно выполнять в различных форматах и т.д.

<h3><a name="jrCompiler">Компилятор отчётов <i>JrCompiler</i></a></h3>
Используется для компиляции шаблонов отчётов формата <i>.jrxml</i>. В результате компиляции создаётся бинарный файл с расширением <i>.jasper</i>. 

<h3><a name="literature">Литература</a></h3>
Литература по JasperReports размещена в директории <i>\\smskss1\install\!DT\JasperReports\Doc\</i><br>
<ul>
  <li><a href="file://smskss1/install/!DT/JasperReports/Doc/The Definitive Guide to JasperReports.pdf">The Definitive Guide to JasperReports. Teodor Danciu and Lucian Chirita</a>.
  <li><a href="file://smskss1/install/!DT/JasperReports/Doc/JasperReports for Java Developers.pdf">JasperReports for Java Developers. David R. Heffelfinger</a>.
</ul>

<h3><a name="error">Ошибки</a></h3>
<br/>

<h3><a name="todo">Доработки</a></h3>
<br/>

<!-- Put @see and @since tags down here. --></div>
</div>
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li class="navBarCell1Rev">Overview</li>
<li>Package</li>
<li>Class</li>
<li><a href="overview-tree.html">Tree</a></li>
<li><a href="deprecated-list.html">Deprecated</a></li>
<li><a href="index-all.html">Index</a></li>
<li><a href="help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev</li>
<li>Next</li>
</ul>
<ul class="navList">
<li><a href="index.html?overview-summary.html" target="_top">Frames</a></li>
<li><a href="overview-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
